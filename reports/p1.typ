
#import "@preview/tablem:0.3.0": tablem
= Первичная постановка задачи, анализ предметной области и методов решения
== Проблема
Я хочу сделать приложение для закупок, которое поможет мне
- меньше времени тратить на сбор в магазин
- не беспокоиться о наличии того или иного ресурса
- планировать питание, исходя из закупок, а не по наитию

== Модель
Приложение хранит ресурсы по категориям и отслеживает их состояние.
Родительские и дочерние категории могут быть следующими:
- еда
  - овощи - (картофель, морковь, капуста, ...)
  - фрукты - (яблоки, бананы, груши, ...)
  - молочные продукты - (молоко, йогурт, сыр, ...)
  - крупы и макароны - (рис, гречка, макароны, ...)
  - мясо, рыба, яйца - (курица, говядина, рыба, яйца)
  - замороженные продукты - (мороженое, замороженные овощи, ...)
  - маринады - (маринованый имбирь, маринованые огурцы, ...)
  - соусы - (майонез, соевый соус, острый соус,  ...)
  - орехи и сухофрукты - (миндаль, грецкие орехи, изюм, ...)
  - чай и сборы - (черный чай, зеленый чай, ромашка, ...)
  - специи  - (соль, перец, паприка, ...)
- медикаменты
  - витамины и добавки
  - обезболивающие
  - средства от простуды
  - перевязочные материалы
- средства для уборки
  - моющие средства (мыло жидкое, порошок, средство для посуды, ...)
  - губки и тряпки (мягкие, железные)
  - мешки (для мусора, пищевые, ...)
  - гигиенические средства (зубной порошок, зубная паста, зубная щётка, ...)
  - бумажные изделия (влажные салфетки, туалетная бумага, платки, ...)
- одежда
  - обувь (кроссовки, ботинки, туфли, ...)
  - уличная одежда (куртки, пальто))
  - домашняя одежда
  - официальная одежда
Категории ресурсов содержат только название и список дочерних категорий.
Категории ресурсов могут содержать свойства:
- название
- родительская категория (исключительно указана для элементарных категорий)
- значения ресурса категории по умолчанию.
#tablem[
  | *Категория*               | *Срок годности* | *Е. И.* | *Мин. кол-во* | *Родительская категория* |
  |-------------------------|---------------|-------|-------------:|------------------------|
  | Овощи                   | 7 дней        | кг    | 0.15 кг     | Еда                    |
  | Фрукты                  | 7 дней        | кг    | 0.15 кг     | Еда                    |
  | Молочные продукты       | 7 дней        | л     | 0.5 л       | Еда                    |
  | Крупы и макароны        | 365 дней      | кг    | 1 кг        | Еда                    |
  | Мясо и рыба             | 3 дня         | кг    | 1 кг        | Еда                    |
]
У каждой категории ресурсов есть значения по умолчанию для упрощения введения ресурсов в базу.
Ресурсы должны обладать следующими свойствами:
- категория,
- название,
- дата покупки,
- срок годности,
- количество,
- единицы измерения (шт, кг, л и т.п.),
- минимальное количество.
Минимальное количество - это значение, при достижении которого ресурс считается на исходе и нужно его пополнить.

Состояния могут быть следующими:
- просроченный (срок годности истёк)
- доступный к использованию (срок годности больше недели)
- срок годности скоро истечёт (срок годности меньше недели)

Составим список продуктов из разных категорий, для первой итерации приложения
- бананы
- яблоки
- картошка
- молоко
- овсянка
- мыло
- витамин Д
- зубная щётка
- зубная паста
- гель для бритья
- шампунь
- мицелярная вода
- ватные диски
- ватные палочки
- губки
- пакеты
- носки

== Анализ системы хранения данных
Существуют несколько подходов к хранению данных в подобных приложениях:
- хранение в структурах языка напрямую (массивах, списках, словарях)
- создание дата-классов или объектов для представления ресурсов и категорий
- использование баз данных (реляционных, NoSQL)
- хранение в файлах (JSON, XML, CSV)
#table(
  columns: 4,
  table.header(
    strong("Тип хранения с примерами"), strong("Сценарий использования "), strong("Плюсы"), strong("Минусы")
  ),
  "Реляционные — SQLite, PostgreSQL",
  "Связанные данные, требуются транзакции и целостность",
  "ACID, поддержка связей и сложных запросов, индексы",
  "PostgreSQL требует сервера/администрирования; SQLite — однопоточное ограничение",

  "NoSQL (документные/ключ-значение) — MongoDB, Firebase",
  "Гибкая схема, быстрое масштабирование, JSON-документы",
  "Гибкость схемы, горизонтальное масштабирование, скорость записи",
  "Слабая поддержка сложных связей и транзакций, консистентность ограничена",

  "Файловые (локальные) — JSON, CSV, XML",
  "Лёгкий экспорт/импорт, прототипы, переносимость данных",
  "Простота, читаемость, не требует сервера",
  "Нет транзакций, сложности с консистентностью и запросами при росте",

  "В памяти / структуры языка — Массивы, словари, объекты",
  "Быстрые прототипы, вычисления во время выполнения",
  "Мгновенный доступ, простота реализации",
  "Данные не сохраняются между запусками, плохо для сценариев с несколькими пользователями",
)
=== Выбор системы хранения данных
В результате анализа было принято решение использовать реляционную базу данных SQLite для хранения данных приложения.

