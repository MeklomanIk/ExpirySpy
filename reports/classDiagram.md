classDiagram;
    class Database {;
        <<static>>;
        -const string DatabaseFileName;
        +string GetConnectionString();
        +void EnsureCreated();
    };
;
    class Repository {;
        -string _connectionString;
        +Repository(string connectionString);
        +long AddCategory(ResourceCategory category);
        +List~ResourceCategory~ GetAllCategories();
        +ResourceCategory? GetCategoryById(long id);
        +void UpdateCategoryName(long id, string newName);
        +long AddResource(ResourceItem item);
        +List~ResourceItem~ GetAllResources();
        +List~(ResourceItem, string)~ GetResourcesWithCategories();
        +List~ResourceItem~ GetResourcesByState(ResourceState state, DateTime now);
        +List~ResourceItem~ GetLowOnStockResources();
        +void UpdateResourceQuantity(long id, double newQuantity);
        +void DeleteResource(long id);
        +void DeleteCategory(long id);
    };
;
    class ResourceCategory {;
        +long Id;
        +string Name;
        +long? ParentId;
        +double? DefaultQuantity;
        +string? DefaultUnit;
        +double? DefaultMinQuantity;
    };
;
    class ResourceItem {;
        +long Id;
        +long CategoryId;
        +string Name;
        +DateTime PurchaseDate;
        +DateTime ExpiryDate;
        +double Quantity;
        +string Unit;
        +double MinQuantity;
        +ResourceState GetState(DateTime now);
        +bool IsLowOnStock();
    };
;
    class ResourceState {;
        Expired;
        ExpiringSoon;
        Available;
    };
;
    Database ..> Repository : использует строку подключения;
    Repository --> ResourceCategory : управляет;
    Repository --> ResourceItem : управляет;
    ResourceItem --> ResourceCategory : CategoryId;
    ResourceItem --> ResourceState : вычисляет